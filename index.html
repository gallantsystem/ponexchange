<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>중고폰거래소 - 내 폰 팔기 가장 쉬운 방법</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; scroll-behavior: smooth; }
        
        .hero-section {
            position: relative;
            background-color: #0f172a;
            overflow: hidden;
        }
        
        .hero-image-bg {
            position: absolute;
            inset: 0;
            object-fit: cover;
            width: 100%;
            height: 100%;
            opacity: 0.4;
        }

        .feature-card:hover { transform: translateY(-8px); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        
        @keyframes ticker {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .ticker-container {
            overflow: hidden;
            white-space: nowrap;
            background: #1e3a8a;
            color: white;
            padding: 12px 0;
            position: relative;
        }
        .ticker-content {
            display: inline-block;
            animation: ticker 30s linear infinite;
        }
        .ticker-item {
            display: inline-flex;
            align-items: center;
            margin-right: 50px;
            font-weight: 500;
        }
        .ticker-item .price { color: #facc15; margin-left: 8px; font-weight: 700; }
    </style>
    <script>
        const API_URL = 'https://predoubtful-unomnisciently-tracee.ngrok-free.dev/api/phones';
        // 이미지 기본 경로 설정
        const IMAGE_BASE_URL = 'https://gallantsystem.github.io/ponexchange/';

        // 이미지 로드 실패 시 핸들러 (네트워크 오류 대비)
        function handleImageError(img) {
            const fallbacks = {
                'hero-bg-img': 'https://images.unsplash.com/photo-1556656793-062ff987b50d?auto=format&fit=crop&q=80&w=2070',
                'middle-banner-img': 'https://images.unsplash.com/photo-1512428559087-560fa5ceab42?auto=format&fit=crop&q=80&w=2070',
                'cs-service-img': 'https://images.unsplash.com/photo-1551836022-d5d88e9218df?auto=format&fit=crop&q=80&w=2070'
            };
            
            // 이미 fallback이 적용되지 않은 경우에만 Unsplash로 교체
            if (!img.src.includes('unsplash.com')) {
                console.warn(`이미지 로드 실패: ${img.src}. 대체 이미지를 사용합니다.`);
                img.src = fallbacks[img.id];
            }
        }
    </script>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold text-blue-600 flex items-center gap-2 cursor-pointer" onclick="window.scrollTo(0,0)">
                <i class="fas fa-mobile-alt"></i> 중고폰거래소
            </div>
            <div class="hidden lg:flex space-x-10 font-medium text-gray-600">
                <a href="#about" class="hover:text-blue-600 transition">서비스 안내</a>
                <a href="#price-list" class="hover:text-blue-600 transition">매입 시세표</a>
                <a href="#contact" class="hover:text-blue-600 transition">내 폰 시세조회</a>
            </div>
            <div class="flex items-center gap-4">
                <a href="https://open.kakao.com/me/ponexchange" target="_blank" class="bg-yellow-400 text-black px-6 py-2.5 rounded-full font-bold hover:bg-yellow-500 transition-all shadow-md flex items-center gap-2">
                    <i class="fas fa-comment"></i> <span class="hidden sm:inline">카톡 상담</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero-section text-white py-24 lg:py-40 relative">
        <img id="hero-bg-img" src="https://gallantsystem.github.io/ponexchange/main_banner.png" onerror="handleImageError(this)" alt="중고폰 매매 이미지" class="hero-image-bg">
        <div class="container mx-auto px-6 relative z-10">
            <div class="max-w-3xl">
                <span class="inline-block bg-blue-500/40 text-blue-100 px-4 py-1.5 rounded-full text-sm font-bold mb-6 backdrop-blur-md border border-blue-400/30">
                    2026년형 중고폰 매입 솔루션
                </span>
                <h1 class="text-5xl lg:text-7xl font-extrabold mb-8 leading-[1.15]">
                    서랍 속 잠자는 폰,<br><span class="text-yellow-400">최고의 가치</span>로 변신
                </h1>
                <p class="text-xl opacity-90 mb-12 max-w-xl leading-relaxed">
                    데이터 보안은 철저하게, 검수는 투명하게.<br>전문 감정사가 제안하는 업계 최고가 시세를 지금 바로 확인하세요.
                </p>
                <div class="flex flex-col sm:flex-row gap-5">
                    <a href="#price-list" class="bg-blue-600 text-white px-10 py-5 rounded-2xl font-bold text-lg hover:bg-blue-700 shadow-xl transition-all hover:-translate-y-1">
                        오늘의 시세 확인
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- 실시간 시세 전광판 -->
    <div class="ticker-container border-y border-blue-900/20">
        <div class="ticker-content" id="ticker-content">
            <span class="ticker-item">최신 매입 시세를 불러오고 있습니다...</span>
        </div>
    </div>

    <!-- Why Choose Us -->
    <section id="about" class="py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-20">
                <h2 class="text-4xl font-extrabold text-gray-900 mb-6">차원이 다른 중고폰 거래</h2>
                <p class="text-gray-500 text-lg">많은 분들이 '중고폰거래소'를 선택하는 이유입니다.</p>
            </div>
            <div class="grid lg:grid-cols-3 gap-12">
                <div class="feature-card group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 transition-all">
                    <div class="w-16 h-16 bg-blue-600 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                        <i class="fas fa-chart-line text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">최고가 매입</h3>
                    <p class="text-gray-600 leading-relaxed">유통 마진을 최소화하여 고객님께 업계 최고 수준의 매입가를 제안합니다.</p>
                </div>
                <div class="feature-card group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 transition-all">
                    <div class="w-16 h-16 bg-indigo-600 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                        <i class="fas fa-user-shield text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">완벽 데이터 삭제</h3>
                    <p class="text-gray-600 leading-relaxed">매입 즉시 전문 솔루션을 통해 모든 데이터를 영구 파기하여 안심할 수 있습니다.</p>
                </div>
                <div class="feature-card group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 transition-all">
                    <div class="w-16 h-16 bg-teal-600 text-white rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                        <i class="fas fa-hand-holding-usd text-2xl"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">당일 즉시 입금</h3>
                    <p class="text-gray-600 leading-relaxed">검수가 완료되면 복잡한 절차 없이 등록하신 계좌로 당일 입금해 드립니다.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Banner Image Section (Middle) -->
    <section class="py-12 bg-white">
        <div class="container mx-auto px-6">
            <div class="rounded-[3rem] overflow-hidden relative h-[300px] lg:h-[450px]">
                <img id="middle-banner-img" src="https://gallantsystem.github.io/ponexchange/service_info.png" onerror="handleImageError(this)" alt="중고폰 거래 배너" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-r from-blue-900/70 to-transparent flex items-center px-10 lg:px-20">
                    <div class="text-white">
                        <h3 class="text-3xl lg:text-4xl font-bold mb-4">최고의 가치로 보답합니다.</h3>
                        <p class="text-lg opacity-80 mb-8">모든 기종 매입 가능, 파손 폰도 문의주세요.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 매입 시세표 Section -->
    <section id="price-list" class="py-24 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6">
                <div>
                    <h2 class="text-4xl font-extrabold text-gray-900">오늘의 매입 시세표</h2>
                    <p class="text-gray-500 mt-2">실시간 시장 상황이 반영된 정직한 시세입니다.</p>
                </div>
                <div id="connection-status" class="text-sm font-medium text-gray-400 flex items-center gap-2">
                    <i class="fas fa-circle text-[8px]"></i> 상태 확인 중...
                </div>
            </div>
            <div class="bg-white rounded-[2rem] shadow-2xl border border-gray-100 overflow-hidden overflow-x-auto custom-scrollbar">
                <div id="phone-list-container" class="min-h-[400px] relative">
                    <div id="loading-spinner" class="py-32 text-center">
                        <div class="inline-block w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mb-6"></div>
                        <p class="text-gray-500 font-medium">데이터를 동기화하고 있습니다...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-24 bg-white">
        <div class="container mx-auto px-6">
            <div class="max-w-6xl mx-auto grid lg:grid-cols-2 gap-12">
                <div class="bg-blue-600 rounded-[3rem] p-12 text-white shadow-2xl relative overflow-hidden">
                    <h2 class="text-4xl font-bold mb-8">빠른 문의 채널</h2>
                    <div class="space-y-8">
                        <div class="flex items-center gap-6">
                            <div class="w-14 h-14 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-md">
                                <i class="fas fa-phone-alt text-xl"></i>
                            </div>
                            <div>
                                <div class="text-blue-200 text-sm mb-1">대표 번호</div>
                                <div class="text-2xl font-bold">010-5780-6629</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-6">
                            <div class="w-14 h-14 bg-white/10 rounded-2xl flex items-center justify-center backdrop-blur-md">
                                <i class="fab fa-kakao text-xl"></i>
                            </div>
                            <div>
                                <div class="text-blue-200 text-sm mb-1">카카오톡 아이디</div>
                                <div class="text-2xl font-bold">ponexchange</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 rounded-[3rem] p-12 shadow-xl border border-gray-100 flex flex-col items-center text-center relative overflow-hidden">
                    <img id="cs-service-img" src="https://gallantsystem.github.io/ponexchange/cs_service.png" onerror="handleImageError(this)" alt="고객 서비스 상담 이미지" class="w-full h-64 object-cover rounded-3xl mb-10 shadow-lg">
                    <h3 class="text-3xl font-extrabold mb-4 text-gray-900">비대면 1:1 상담</h3>
                    <p class="text-gray-500 mb-8">기다릴 필요 없이 카카오톡으로 즉시 대화하세요.</p>
                    <a href="https://open.kakao.com/me/ponexchange" target="_blank" class="w-full bg-yellow-400 text-black py-5 rounded-2xl font-bold text-xl hover:bg-yellow-500 transition shadow-xl flex items-center justify-center gap-2">
                        <i class="fas fa-comment"></i> 카카오톡 채널 바로가기
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 py-16 text-gray-400">
        <div class="container mx-auto px-6">
            <div class="grid md:grid-cols-2 gap-12 mb-12 border-b border-gray-800 pb-12">
                <div>
                    <div class="text-2xl font-bold text-white mb-6">중고폰거래소</div>
                    <div class="space-y-2 text-sm">
                        <p>상호명: 인피니티 | 대표자: 전종문</p>
                    </div>
                </div>
                <div class="md:text-right">
                    <div class="text-white font-bold mb-6 text-lg">고객센터</div>
                    <div class="space-y-2">
                        <p class="text-2xl font-bold text-blue-500">010-5780-6629</p>
                        <p>평일/주말: 09:00 ~ 21:00 (연중무휴)</p>
                        <p>Email: jmjeon99@naver.com</p>
                    </div>
                </div>
            </div>
            <div class="text-center text-xs opacity-50">
                <p>&copy; 2026 중고폰거래소 (Infinity). All Rights Reserved.</p>
                <p class="mt-2">본 사이트는 중고 휴대폰 매입 전문 서비스로 데이터 보안 파기를 보장합니다.</p>
            </div>
        </div>
    </footer>

    <script>
        async function fetchPhoneData() {
            const container = document.getElementById('phone-list-container');
            const statusLabel = document.getElementById('connection-status');
            let phoneData = [];

            try {
                const response = await fetch(API_URL, {
                    method: 'GET',
                    headers: { 'ngrok-skip-browser-warning': 'true' }
                });
                
                if (!response.ok) throw new Error("API Offline");
                
                const result = await response.json();
                phoneData = Array.isArray(result) ? result : (result.data || []);
                
                statusLabel.innerHTML = '<span class="text-green-500 font-bold">● 실시간 연결됨</span>';
            } catch (error) {
                console.warn("API 호출 실패, data.json 로드 시도:", error);
                try {
                    const localRes = await fetch('data.json');
                    if (!localRes.ok) throw new Error("Local data.json not found");
                    const localResult = await localRes.json();
                    phoneData = Array.isArray(localResult) ? localResult : (localResult.data || []);
                    statusLabel.innerHTML = '<span class="text-orange-500 font-bold">● 로컬 데이터 로드됨</span>';
                } catch (e) {
                    phoneData = [
                        { manufacturer: 'Apple', model: 'iPhone 15 Pro', storage: 256, grade: 'S', price: 1250000 },
                        { manufacturer: 'Samsung', model: 'Galaxy S24 Ultra', storage: 512, grade: 'S', price: 1350000 },
                        { manufacturer: 'Apple', model: 'iPhone 14', storage: 128, grade: 'A', price: 750000 }
                    ];
                    statusLabel.innerHTML = '<span class="text-red-500 font-bold">● 기본 데이터 모드</span>';
                }
            }
            
            container.innerHTML = '';
            renderTable(phoneData, container);
            updateTicker(phoneData);
        }

        function renderTable(data, container) {
            if (!data || data.length === 0) {
                container.innerHTML = '<p class="py-20 text-center text-gray-500">표시할 시세 데이터가 없습니다.</p>';
                return;
            }
            const table = document.createElement('table');
            table.className = 'w-full text-left border-collapse';
            
            const labels = ['제조사', '기종명', '용량', '등급', '최고가'];
            const keys = ['manufacturer', 'model', 'storage', 'grade', 'price'];

            let html = `<thead class="bg-gray-50"><tr>`;
            labels.forEach(l => html += `<th class="px-8 py-5 text-sm font-bold text-gray-500 border-b border-gray-100">${l}</th>`);
            html += `</tr></thead><tbody class="divide-y divide-gray-100">`;
            
            data.forEach(item => {
                html += `<tr>`;
                keys.forEach(k => {
                    let val = item[k] !== undefined ? item[k] : '-';
                    if (k === 'storage' && typeof val === 'number') val = val + 'GB';
                    if (k === 'price' && typeof val === 'number') val = new Intl.NumberFormat('ko-KR').format(val) + '원';
                    if (k === 'grade' && val.length <= 2) val = val + '급';
                    html += `<td class="px-8 py-5 ${k==='price'?'text-blue-600 font-bold':'text-gray-700'}">${val}</td>`;
                });
                html += `</tr>`;
            });
            table.innerHTML = html + `</tbody>`;
            container.appendChild(table);
        }

        function updateTicker(data) {
            const ticker = document.getElementById('ticker-content');
            if(!ticker) return;
            let tickerHtml = "";
            const displayData = data && data.length > 0 ? [...data, ...data] : [];
            displayData.forEach(item => {
                const price = typeof item.price === 'number' ? new Intl.NumberFormat('ko-KR').format(item.price) + '원' : item.price;
                const model = item.model || '기종 정보 없음';
                const grade = item.grade ? item.grade + '급' : '등급 미정';
                tickerHtml += `<span class="ticker-item"><i class="fas fa-bolt mr-2 text-yellow-400"></i>${model} [${grade}] <span class="price">${price}</span></span>`;
            });
            ticker.innerHTML = tickerHtml || '<span class="ticker-item">현재 거래 가능한 시세 정보를 확인 중입니다.</span>';
        }

        window.addEventListener('DOMContentLoaded', fetchPhoneData);
    </script>
</body>
</html>
